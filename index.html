<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>語順練習</title>
<style>
*{padding:0;margin:0;box-sizing:border-box}html{width:100%;height:100%}body{width:100%;height:100%;background-image:url(bg.jpg);background-size:100% 100%;background-attachment:fixed;display:flex;flex-flow:column;align-items:center;justify-content:center}.glass{width:95%;margin:10px;padding:20px;background-color:#fff4;border:1px solid #fff8;border-right-color:#fff1;border-bottom-color:#fff1;border-radius:10px;backdrop-filter:blur(20px);box-shadow:0 5px 10px #4447;display:flex;flex-wrap:wrap;font-size:1.5rem}.incomplete_fld{border:1px solid #f993;background-color:#f993}.completed_fld{border:1px solid #9f9;background-color:#9f94}.misschr{color:red}@media screen and (max-width:800px){.glass{width:98%;font-size:1rem;padding:10px}}
</style>
</head>

<body>
</body>

<script>
"use strict";const gWorkBook=new function(){function t(n){function f(n){for(let i=n+1;i<t.length;i++)if(r[i]==!1)return t[i];for(let i=0;i<n;i++)if(r[i]==!1)return t[i];return null}const t=[],r=[];for(let u=0;u<n.length;u++)t.push(new i(u,n[u],this)),r.push(!1);this.ReqFocus=n=>{u(n)};this.NtfyCompleted=n=>{r[n]=!0,u(f(n))};this.NtfyReset=n=>{r[n]=!1,u(t[n])};const u=(n=>{let t=n;return t.SetFocus(),document.onkeydown=t.OnKeyDown,n=>{n!=t&&(t!=null&&t.RemoveFocus(),t=n,t==null?document.onkeydown=null:(t.SetFocus(),document.onkeydown=t.OnKeyDown))}})(t[0])}function i(n,t,i){const o=t.split(" "),s=new r(o),f=new u(o,s,this),h=document.body.Add_Div();h.style.width="95%";const e=document.createElement("button");e.textContent="Reset";h.appendChild(e);this.OnKeyDown=n=>{f.OnKeyDown(n)};this.SetFocus=()=>{f.SetFocus()};this.RemoveFocus=()=>{f.RemoveFocus()};this.ReqFocus=()=>{i.ReqFocus(this)};this.NtfyCompleted=()=>{i.NtfyCompleted(n)};e.onclick=()=>{s.Reset(),f.Reset(),i.NtfyReset(n),e.blur()};this.DBG_GetIdx=()=>n}function r(t){const i=document.body.Add_Div();i.classList.add("glass");const r=[];for(let u=0;u<t.length;u++){const f=document.createElement("span");f.textContent=t[u]+" ";f.style.color=n.COLOR_Model_NoType;r.push(f);i.appendChild(f)}let u=0;this.AdvanceCurWord=()=>{r[u++].style.color=n.COLOR_Model_Typed};this.GetHeight=()=>i.clientHeight+2;this.Reset=()=>{for(let t=0;t<u;t++)r[t].style.color=n.COLOR_Model_NoType;u=0}}function u(t,i,r){const u=document.body.Add_Div();u.classList.add("glass");u.classList.add("incomplete_fld");u.style.height=i.GetHeight()+"px";this.Get_e_fld=()=>u;const h=[];for(let n=t.length;n>0;n--){const n=document.createElement("span");u.appendChild(n);h.push(n)}const o=new f(this);let e=0;const c=t.length-1;let s=!1;o.Set_NewWord(t[0]);this.AdvanceCurWord=()=>{if(i.AdvanceCurWord(),h[e].textContent=t[e]+" ",e++,e<=c){o.Set_NewWord(t[e]);return}s=!0;o.NtfyCompleted();u.classList.add("completed_fld");u.style.boxShadow="";r.NtfyCompleted()};this.OnKeyDown=n=>{o.OnKeyDown(n)};this.SetFocus=()=>{s||(u.style.boxShadow=n.Px_Border_Focused,u.focus())};this.RemoveFocus=()=>{s||(u.style.boxShadow="")};u.onclick=()=>{s||r.ReqFocus()};this.Reset=()=>{for(let n=0;n<e;n++)h[n].textContent="";e=0;s=!1;o.Reset();o.Set_NewWord(t[0]);u.classList.remove("completed_fld")}}function f(t){const u=document.createElement("span");t.Get_e_fld().appendChild(u);const f=new e(t);let o,r,i,s=!1;this.Set_NewWord=t=>{o="",u.textContent="",r=t.slice(0,n.PCS_Chr_to_Input),i=r.charCodeAt(0),i>96&&(i-=32)};this.NtfyCompleted=()=>{u.textContent="",s=!0};this.OnKeyDown=n=>{if(!s&&!(n.key.length>1)){let e=n.key.charCodeAt(0);if(!(e<=32)&&!(e>=127)){if(e>96&&(e-=32),e!=i){f.SetChr(n.key);return}if(f.ClearChr(),o+=n.key,u.textContent=o,r.length==1){t.AdvanceCurWord();return}r=r.slice(1);i=r.charCodeAt(0);i>96&&(i-=32)}}};this.Reset=()=>{s=!1,f.ClearChr()}}function e(t){const r=t.Get_e_fld().Add_Div();r.classList.add("misschr");let i=-1;this.SetChr=t=>{i>0&&clearTimeout(i),r.textContent=t,i=setTimeout(()=>{r.textContent="",i=-1},n.MSec_Clear_Miss_Chr)};this.ClearChr=()=>{i>0&&(clearTimeout(i),i=-1),r.textContent.length>0&&(r.textContent="")}}this.SetTxts=n=>{new t(n)};const n={COLOR_Model_NoType:"#888",COLOR_Model_Typed:"#000",PCS_Chr_to_Input:1,MSec_Clear_Miss_Chr:1e3,Px_Border_Focused:"0 0 0 3px #f008"};Element.prototype.Add_Div=function(){const n=document.createElement("div");return this.appendChild(n),n}}
</script>
<script>
const txts = [
  "I rarely eat snacks and saw this at my local store.",
  "I love spicy snacks but didn't really care for Cheetos but I wanted to try it out to see how hot it is.",
];
gWorkBook.SetTxts(txts);
</script>

</html>
